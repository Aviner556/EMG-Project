#include "buzzer.h"
#include "main.h"

BUTT_STATE play = STATE_MUSIC_OFF;

int note[] = {390, 340, 303, 286, 255, 227, 202};
int currentNote = 0;
int tone = 3;
int sec = 9999;

void playNextNote()
{
	currentNote++;
	if(currentNote >= size){
		currentNote = 0;
	}
	playNote(currentNote);
}

void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
{
	if(play == STATE_MUSIC_OFF){
		HAL_TIM_Base_Start_IT(&htim3);
		HAL_TIM_PWM_Start_IT(&htim3, TIM_CHANNEL_1);
		playNote(0);
		play = STATE_MUSIC_ON;
	}
	else
	{
		HAL_TIM_Base_Stop_IT(&htim3);
		HAL_TIM_PWM_Stop_IT(&htim3, TIM_CHANNEL_1);
		play = STATE_MUSIC_OFF;
	}
}
